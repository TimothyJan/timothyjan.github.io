<main>

  <app-sidebar></app-sidebar>

  <!-- main-content -->
  <div class="main-content">
    <!-- NAVBAR -->
    <nav class="navbar">
      <ul class="navbar-list">
        <li class="navbar-item">
          <button class="navbar-link" [class.active]="activePage === 'about'" (click)="setActivePage('about')" mat-button>About</button>
        </li>
        <li class="navbar-item">
          <button class="navbar-link" [class.active]="activePage === 'resume'" (click)="setActivePage('resume')" mat-button>Resume</button>
        </li>
        <li class="navbar-item">
          <button class="navbar-link" [class.active]="activePage === 'portfolio'" (click)="setActivePage('portfolio')" mat-button>Portfolio</button>
        </li>
      </ul>
    </nav>

    <!-- ABOUT -->
    <article class="about" [class.active]="activePage === 'about'" data-page="about">
      <header>
        <h2 class="h2 article-title">About me</h2>
      </header>

      <section class="about-text">
        <p>
          I'm a Software Engineer at Jantek Electronics specializing in Full Stack development. I build scalable web applications using ASP.NET Core and Angular, and I have a deep interest in performance optimization and AI integration.
        </p>
        <p>
          My path to software started in Electrical Engineeringâ€”a family tradition following my grandfather and dad. After three years in that field, I made the leap to Computer Science during the COVID era. (Sorry, Dad! ðŸ˜…) That background gives me a unique perspective on hardware-software interaction and system-level thinking.
        </p>
        <p>
          I'm happiest when building tools that have a tangible impact. Lately, that means creating full-stack apps or writing scripts to simplify daily life at home with my wife (we just got married in August 2024!). Outside of coding, I'm either at the gym, on the basketball/volleyball court, exploring new cuisines while traveling, or debating strategy in board games and video games."
        </p>
      </section>

      <!-- Service -->
      <section class="service">
        <h3 class="h3 service-title">What I'm Doing</h3>
        <ul class="service-list">
          @for (item of serviceItems; track item.title) {
            <li class="service-item">
              <div class="service-icon-box">
                <div class="icon-box">
                  <mat-icon>{{ item.icon }}</mat-icon>
                </div>
              </div>
              <div class="service-content-box">
                <h4 class="h4 service-item-title">{{ item.title }}</h4>
                <p class="service-item-text">{{ item.description }}</p>
              </div>
            </li>
          }
        </ul>
      </section>

    </article>

    <!-- RESUME -->
    <article class="resume" [class.active]="activePage === 'resume'" data-page="resume">
      <header>
        <h2 class="h2 article-title">Resume</h2>
      </header>

      <!-- Resume Download Button -->
      <div class="resume-actions">
        <a href="/Resume_TimothyJan.pdf"
          class="resume-btn"
          target="_blank"
          rel="noopener"
          download="Timothy_Jan_Resume.pdf">
          <mat-icon>picture_as_pdf</mat-icon>
          <span>Download Resume (PDF)</span>
          <mat-icon>download</mat-icon>
        </a>
      </div>

      <section class="timeline">
        <div class="title-wrapper">
          <div class="icon-box">
            <mat-icon>work_outline</mat-icon>
          </div>
          <h3 class="h3">Experience</h3>
        </div>

        <ol class="timeline-list">
          @for (job of experiences; track job.companyName + job.period) {
            <li class="timeline-item">
              <div class="timeline-item-header">
                <div class="timeline-item-title">
                  <h4 class="h4">{{ job.title }}</h4>
                  <a [href]="job.companyUrl" target="_blank" rel="noopener" class="company-link">
                    @ {{ job.companyName }}
                    <mat-icon>open_in_new</mat-icon>
                  </a>
                  @if (job.isCurrent) {
                    <span class="current-role">Current</span>
                  }
                </div>
                <span class="period">{{ job.period }}</span>
              </div>

              <ul class="achievements-list">
                @for (achievement of job.achievements; track achievement) {
                  <li class="achievement-item">
                    <mat-icon>chevron_right</mat-icon>
                    <span>{{ achievement }}</span>
                  </li>
                }
              </ul>
            </li>
          }
        </ol>
      </section>

      <!-- Skills Grid Section -->
      <section class="skills-grid-section">
        <div class="title-wrapper">
          <div class="icon-box">
            <mat-icon>code</mat-icon>
          </div>
          <h3 class="h3">Technical Skills</h3>
        </div>

        <div class="skills-grid">
          @for (category of skillCategories; track category.name) {
            <div class="skill-category">
              <div class="category-header">
                <div class="icon-box">
                  <mat-icon>{{ category.icon }}</mat-icon>
                </div>
                <h4>{{ category.name }}</h4>
                <span>{{ category.items.length }}</span>
              </div>

              <div class="skill-items">
                @for (skill of category.items; track skill) {
                  <span class="skill-tag">
                    @switch (category.name) {
                      @case ('Frontend') {
                        <mat-icon>html</mat-icon>
                      }
                      @case ('Backend') {
                        <mat-icon>settings</mat-icon>
                      }
                      @case ('Databases') {
                        <mat-icon>device_hub</mat-icon>
                      }
                      @case ('Architecture') {
                        <mat-icon>account_tree</mat-icon>
                      }
                      @case ('Tools & Validation') {
                        <mat-icon>build</mat-icon>
                      }
                    }
                    {{ skill }}
                  </span>
                }
              </div>
            </div>
          }
        </div>
      </section>

      <section class="timeline">
        <div class="title-wrapper">
          <div class="icon-box">
            <mat-icon>menu_book</mat-icon>
          </div>
          <h3 class="h3">Education</h3>
        </div>

        <ol class="timeline-list">
          @for (item of education; track item.title; let i = $index) {
            <li class="timeline-item">
              <h4 class="h4 timeline-item-title">{{ item.title }}</h4>
              <span>{{ item.period }}</span>
              <p class="timeline-text">{{ item.description }}</p>

              <!-- Course Toggle Button -->
              <div class="course-toggle" [class.expanded]="expandedCourses[i]" (click)="toggleCourses(i)">
                <mat-icon>{{ expandedCourses[i] ? 'expand_less' : 'expand_more' }}</mat-icon>
                <span>{{ expandedCourses[i] ? 'Hide courses' : 'Show courses (' + item.courses.length + ')' }}</span>
              </div>

              <!-- Course List (conditionally shown) -->
              @if (expandedCourses[i]) {
                <div class="course-list-container">
                  <div class="course-list">
                    @for (course of item.courses; track course) {
                      <div class="course-item">
                        {{ course }}
                      </div>
                    }
                  </div>
                </div>
              }
            </li>
          }
        </ol>
      </section>

    </article>

    <!-- PORTFOLIO -->
    <article class="portfolio" [class.active]="activePage === 'portfolio'" data-page="portfolio">
      <header>
        <h2 class="h2 article-title">Portfolio</h2>
      </header>

      <section class="projects">
        <ul class="filter-list">
          @for (category of filterCategories; track category) {
            <li class="filter-item">
              <button class="filter-btn" [class.active]="activeFilter === category"
                      (click)="setActiveFilter(category)" mat-button data-filter-btn>
                {{ category }}
              </button>
            </li>
          }
        </ul>

        <div class="filter-select-box">
          <button class="filter-select" [class.active]="filterSelectActive"
                  (click)="toggleFilterSelect()" data-select>
            <div class="select-value" data-selecct-value>{{ selectedFilter }}</div>
            <div class="select-icon">
              <mat-icon>expand_more</mat-icon>
            </div>
          </button>

          <ul class="select-list">
            @for (category of filterCategories; track category) {
              <li class="select-item">
                <button (click)="selectFilter(category)" data-select-item>{{ category }}</button>
              </li>
            }
          </ul>
        </div>

        <ul class="project-list">
          @for (project of filteredProjects(activeFilter); track project.name) {
            <li class="project-item active"
                [class.active]="true"
                (click)="openProjectModal(project)">
              <a href="javascript:void(0)">
                <figure class="project-img">
                  <div class="project-item-icon-box">
                    <mat-icon>visibility</mat-icon>
                  </div>
                  <img [src]="project.imageCaptions[0]?.imageUrl" [alt]="project.name" loading="lazy">
                  <span class="project-tech-badge">{{ project.category }}</span>
                </figure>
                <h3 class="project-title">{{ project.name }}</h3>
                <p class="project-category">{{ project.description | slice:0:100 }}...</p>
              </a>
            </li>
          }
        </ul>
      </section>

      <!-- Project Modal -->
      <div class="project-modal-container" [class.active]="projectModalActive">
        <div class="overlay" [class.active]="projectModalActive" (click)="closeProjectModal()"></div>

        @if (selectedProject) {
          <div class="project-modal">
            <div class="project-modal-header">
              <h2>{{ selectedProject.name }}</h2>
              <button class="modal-close-btn" (click)="closeProjectModal()" mat-icon-button>
                <mat-icon>close</mat-icon>
              </button>
            </div>

            <div class="project-modal-content">
              <p class="project-modal-description">{{ selectedProject.description }}</p>

              <div class="project-modal-links">
                <a [href]="selectedProject.url" target="_blank" rel="noopener" class="project-modal-link">
                  <mat-icon>code</mat-icon>
                  <span>GitHub Repository</span>
                  <mat-icon>open_in_new</mat-icon>
                </a>

                @if (selectedProject.demoUrl) {
                  <a [href]="selectedProject.demoUrl" target="_blank" rel="noopener" class="project-modal-link">
                    <mat-icon>launch</mat-icon>
                    <span>Live Demo</span>
                    <mat-icon>open_in_new</mat-icon>
                  </a>
                }
              </div>

              <h3 class="h4" style="color: var(--white-2); margin-bottom: 15px;">Gallery</h3>

              <div class="project-gallery">
                @for (image of selectedProject.imageCaptions; track image.imageUrl) {
                  <div class="gallery-item">
                    <img [src]="image.imageUrl" [alt]="image.caption" class="gallery-image">
                    <div class="gallery-caption">{{ image.caption }}</div>
                  </div>
                }
              </div>
            </div>
          </div>
        }
      </div>

    </article>

  </div>
</main>
